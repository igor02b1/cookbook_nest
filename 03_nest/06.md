<h1>Projeto 02 - Blog Pessoal - Iniciando o Projeto Nest</h1>

O que veremos por aqui:

1. Criar o Banco de dados no MySQL
2. Configurar o Banco de dados na Classe AppModule
3. Executar a Aplica√ß√£o

<h2>üë£ Passo 01 - Criar o Banco de Dados</h2>

O Nest n√£o consegue criar o Banco de dados sozinho, por isso precisamos criar o Banco de dados no MySQL antes de configuramos a conex√£o na aplica√ß√£o.

1. Na Caixa de pesquisas do Windows, localize o <b>MySQL</b> (Marcado em vermelho na imagem), e clique no <b>MySQL Workbench</b>  (Marcado em azul na imagem).

<div align="center"><img src="https://i.imgur.com/zsr8Om7.png" title="source: imgur.com" /></div>

2. No <b>MySQL Workbench</b>, Clique sobre a <b>Conex√£o Local instance MySQL80</b>

<div align="center"><img  src="https://i.imgur.com/HBdNTkU.png" title="source: imgur.com" /></div>

3. Caso seja solicitada a senha, <b>digite a senha do usu√°rio root</b> e marque a op√ß√£o <b>Save password in vault</b> para gravar a senha e n√£o perguntar novamente.

<div align="center"><img src="https://i.imgur.com/xC6JFoe.png" title="source: imgur.com" /></div>

4. Ser√° aberta a janela principal do <b>MySQL Workbench</b>. 

<div align="center"><img src="https://i.imgur.com/jVDtxuJ.png" title="source: imgur.com" /></div>

5. Abra um novo arquivo SQL **(SQLFile)**, digite o comando abaixo e execute a query clicando no primeiro raio <img src="https://i.imgur.com/9FtJQlk.png" title="source: imgur.com" width="30px"/> para criar o Banco de dados **db_blogpessoal**.

```sql
CREATE DATABASE db_blogpessoal;
```
<div align="center"><img src="https://i.imgur.com/SdIIJ5Y.png" title="source: imgur.com" /></div>

6. Ao executar a query, ser√° criado o Banco de dados **db_blogpesoal**. Na janela **Navigator**, localizada no lado esquerdo da tela, ser√° exibido o Banco de dados **db_blogpessoal** na lista de **Schemas**.

<div align="center"><img src="https://i.imgur.com/YtmyBSY.png" title="source: imgur.com" width="50%"/></div>

7. Caso o Banco de dados **db_blogpessoal** n√£o esteja aparecendo na lista, clique no bot√£o <img src="https://i.imgur.com/YGV5zIh.png" title="source: imgur.com" width="4%"/> **Refresh**, localizado ao lado direito da palavra Schemas, na janela **Navigator**, como mostra a figura abaixo:

<div align="center"><img src="https://i.imgur.com/kVeQuNX.png" title="source: imgur.com" width="50%"/></div>

<div align="left"><img src="https://i.imgur.com/Mh2KzWe.png" title="source: imgur.com" width="25px"/> <a href="https://www.w3schools.com/sql/sql_create_db.asp" target="_blank"><b>Documenta√ß√£o: <i>Create database - W3Schools</i></b></a>

<h2>üë£ Passo 02 - Configurar a Conex√£o com o Banco de dados</h2>

Diferente do Projeto Hello World, no Projeto Blog Pessoal vamos utilizar um Banco de dados para persistir os nossos Objetos, ou seja, gravar dados nas Tabelas. 

Antes de iniciarmos o processo de Desenvolvimento do c√≥digo das nossa Classes, precisamos configurar o o acesso ao nosso Banco de dados.

A configura√ß√£o do Banco de dados ser√° implementada na Classe **app.module.ts**, localizado na pasta **src**, como mostra a figura abaixo:

<div align="center"><img src="https://i.imgur.com/ROTAiMw.png" title="source: imgur.com" /></div>

1. Abra a Classe **app.module.ts**, localizada na pasta **src**

<div align="center"><img src="https://i.imgur.com/t5KJ16u.png" title="source: imgur.com" /></div>

A sua classe estar√° implementada igual a imagem acima. Antes de configurar o Banco de dados, vamos remover alguns itens desnecess√°rios para o nosso projeto Blog Pessoal.

* Apagar as linhas 2 e 3
* Na linha 7 apagar a Classe **AppController**
* Na linha 8 apagar a Classe **AppService**

A Classe **AppModule** ficar√° igual a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/aw6lv99.png" title="source: imgur.com" /></div>

Ap√≥s a remo√ß√£o dos itens desnecess√°rios, vamos implementar a configura√ß√£o do Banco de dados igual a imagem abaixo: 

<div align="center"><img src="https://i.imgur.com/big6Uwe.png" title="source: imgur.com" /></div>


Vamos detalhar as altera√ß√µes realizadas:

**Linha 2:** Importamos o pacote **TypeORMModule**, que foi instalado anteriormente

**Linha 5:** Inserimos o M√≥dulo **TypeORMModule** dentro do array **imports**. Neste M√≥dulo, atrav√©s do M√©todo **forRoot()** iremos configurar a conex√£o com o Banco de dados.

**Linha 7:** A propriedade **type** define o tipo do Banco de dados (MySQL)

**Linha 8:** A propriedade **port** define o numero da porta associada ao Banco de dados (3306 - Porta padr√£o do MySQL)

**Linha 9:** A propriedade **host** define o endere√ßo do servidor onde Banco de dados est√° hospedado (localhost - seu computador). Caso estivesse na nuvem, seria necess√°rio indicar o endere√ßo na WEB.

**Linha 10:** A propriedade **username** define o usu√°rio que utilizaremos para acessar o Banco de dados (root - Usu√°rio administrador do MySQL)

**Linha 11:** A propriedade **password** define a senha do usu√°rio indicado na configura√ß√£o anterior (root - senha padr√£o do MySQL). 

**Linha 12:** A propriedade **database** define o nome do Banco de dados que foi criado no MySQL (db_blogpessoal)

**Linha 13:** A propriedade **entities** por enquanto deixaremos um array vazio. Assim que criarmos as **Classes Entity**, vamos ineri-las dentro do array, para que o TypeORM crie as tabelas no Banco de dados.

**Linha 14:** A propriedade **synchronize** definida com true indica se as tabelas do Banco de dados devem ser criadas automaticamente em cada inicializa√ß√£o da aplica√ß√£o. 

<br />

<div align="left"><img src="https://i.imgur.com/O6PILGE.png" title="source: imgur.com" width="25px"/> <a href="https://docs.nestjs.com/techniques/database" target="_blank"><b>Documenta√ß√£o: TypeOrmModule</b></a>

<div align="left"><img src="https://i.imgur.com/OtnA0bd.png" title="source: imgur.com" width="30px"/> <a href="https://typeorm.io/data-source-options#mysql--mariadb-data-source-options" target="_blank"><b>Documenta√ß√£o: TypeOrmModule - Op√ß√µes de configura√ß√£o - MySQL</b></a>

<br /><br />

| <img src="https://i.imgur.com/vVDBDG0.png" title="source: imgur.com" width="200px"/> | <div align="left"> **ALERTA DE BSM:** *Mantenha a Aten√ß√£o aos Detalhes ao inserir as configura√ß√µes do Banco de dados na Classe AppModule, especialmente no nome do Banco de dados (database) e na senha do usu√°rio root (password).* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<br />

<div align="left"><img src="https://i.imgur.com/bQGvf3h.png" title="source: imgur.com" width="25px"/> <a href="mudar" target="_blank"><b>C√≥digo fonte da Classe AppModule</b></a>

<br />

<h2>Observa√ß√µes importantes:</h2>

- O Nome do banco de dados deve seguir o padr√£o **db_nome_do_banco**. O prefixo **db** indica que se trata de um Database (Banco de dados). O nome do banco √© recomendado que seja **o mesmo do projeto** (blogpessoal), em **letras min√∫sculas**, **sem espa√ßos em branco ou caracteres especiais e acentos**. Para separar as palavras em um nome composto, utilize o _ (underline). **Exemplo:** db_blog_pessoal.

- O endere√ßo **localhost** √© o endere√ßo local, ou seja, o seu pr√≥prio computador. Quando a aplica√ß√£o estiver na nuvem, o endere√ßo do Banco de dados ser√° alterado para um endere√ßo remoto.

- Para fins de aprendizagem, estamos utilizando no SGBD MySQL o usu√°rio **root**. Vale ressaltar que no mercado de trabalho, uma aplica√ß√£o em produ√ß√£o, jamais utilizar√° o usu√°rio root, por se tratar do usu√°rio administrador do SGBD, que tem plenos poderes sobre o Servidor. Em geral, o DBA (Database Administrator), cria um usu√°rio apenas com os direitos de acesso que a aplica√ß√£o ir√° precisar.

- A configura√ß√£o do **fuso-hor√°rio** no **Servidor da aplica√ß√£o** √© essencial para evitar que data e hora incorretas sejam persistidas no Banco de dados, especialmente em atributos do tipo **Timestamp**, que obt√©m a data e a hora do Servidor.

- Tenha cuidado com a propriedade **synchronize** e n√£o use isso em produ√ß√£o. Caso contr√°rio, voc√™ pode perder dados do seu cliente. Essa op√ß√£o √© √∫til durante a depura√ß√£o e o desenvolvimento da aplica√ß√£o. 

<br />

| <img src="https://i.imgur.com/hOgWvSc.png" title="source: imgur.com" width="150px"/> | <div align="left"> **ATEN√á√ÉO:** *Caso a senha do seu MySQL n√£o seja **root**, atualize a propriedade  **password** inserindo a senha que voc√™ cadastrou no MySQL no momento da instala√ß√£o.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<br />

| <img src="https://i.imgur.com/RfjtOFi.png" title="source: imgur.com" width="120px"/> | <div align="left"> **DICA:** *Caso voc√™ tenha esquecido a senha do seu usu√°rio root do MySQL, consulte o <a href="../00_ambiente/04_uninstall_mysql.md"><b>Guia de Reinstala√ß√£o do MySQL</b></a> e siga as instru√ß√µes.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<br />

Para finalizar, vamos apagar os arquivos desnecess√°rios para o nosso projeto Blog Pessoal.

Na pasta src, observe que temos 5 Classes como mostra a figura abaixo. 

<div align="center"><img src="https://i.imgur.com/uEZ25As.png" title="source: imgur.com" /></div>

Vamos apagar as 2 Classes destacadas em amarelo: **app.controller.spec.ts** (Classe de testes) e **app.controller.ts** (Classe Controladora). Selecione as 2 Classes e apague as 2 Classes. Na imagem abaixo, veja como ficar√° a pasta **src** ap√≥s apagar as 2 Classes.

<div align="center"><img src="https://i.imgur.com/ODV1sCh.png" title="source: imgur.com" /></div>

| <img src="https://i.imgur.com/hOgWvSc.png" title="source: imgur.com" width="300px"/> | <div align="left"> **ATEN√á√ÉO:** *A Classe de testes (app.controller.spec) n√£o ser√° utilizada porqu√™ os testes s√£o implementados na pasta **test** e a Classe AppController responde a requisi√ß√µes para o endere√ßo raiz (http://localhost:3000/), que mais a frente ser√° utilizado pela Documenta√ß√£o da aplica√ß√£o.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<h2>üë£ Passo 03 - Executar a aplica√ß√£o</h2>

1. Verifique se voc√™ est√° dentro da pasta do projeto, como mostra a figura abaixo:


<div align="center"><img src="https://i.imgur.com/67GK3fX.png" title="source: imgur.com" /></div>

2. Digite o comando ***npm run start:dev***, para compilar e executar o nosso projeto **blogpessoal**. 

```bash
npm run start:dev
```

3. Se tudo deu certo, o resultado ser√° semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/nEAKeP5.png" title="source: imgur.com" /></div>

<h2>Anexo I - Erros comuns</h2>

| Erro                                                         | Descri√ß√£o                                                    |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| **Access denied for user 'root'@'localhost' (using password: NO)** | Senha incorreta. Verifique se voc√™ digitou corretamente a senha do usu√°rio root do MySQL. |
| **Unknown database 'db_blogpessoal2'**                       | Banco de dados n√£o encontrado. Verifique se voc√™ criou o Banco de dados no MySQL ou se o nome est√° correto. |

<br /><br />

<div align="left"><img src="https://i.imgur.com/bQGvf3h.png" title="source: imgur.com" width="30px"/> <a href="mudar" target="_blank"><b>C√≥digo fonte do projeto</b></a>

<br /><br />
	
<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>
